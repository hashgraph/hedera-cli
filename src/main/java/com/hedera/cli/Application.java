/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package com.hedera.cli;

import java.io.File;
import java.util.List;

import com.hedera.cli.hedera.Hedera;
import com.hedera.cli.hedera.utils.DataDirectory;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.ComponentScan;

@SpringBootApplication
@EnableAutoConfiguration
@ComponentScan("com.hedera.cli")
public class Application {

    public static void main(String[] args) {
        ApplicationContext context = SpringApplication.run(Application.class, args);
        // set defaults
        DataDirectory dataDirectory = context.getBean(DataDirectory.class);
        dataDirectory.readFile("network.txt", "testnet");

        Hedera hedera = context.getBean(Hedera.class);
        List<String> networkList = hedera.getNetworksStrings();
        for (String network: networkList) {
            String accountsDirForNetwork = network + File.separator + "accounts";
            dataDirectory.mkHederaSubDir(accountsDirForNetwork);
        }
    }
}